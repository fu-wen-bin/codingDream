# HTTP/0.9 版本

- 学术交流
- 超文本传输协议：用于传输类似HTML文件资源

## 请求响应流程：

- 客户端发送请求行信息 -- GET/index.html
- 服务器读取对应的HTML文件，将内容使用**ASCII**字符流返回给客户端

## 特点：

1. 只有请求行，没有请求头和请求体 -- 后端**只能拿到前端请求的路径**
2. 只有响应体，没有响应头 -- 后端**无法告知前端返回内容的类型**
3. 返回的内容都是**ASCII**字符流 -- **无法传输图片等非文本资源**

# HTTP/1.0 版本

- 万维网发展迅速，浏览器诞生，页面要展示的内容不再局限于纯文本，还有js、css、图片、音视频等资源
- 多种类型文件的下载是HTTP/1.0的一个核心诉求，编码方式不仅仅有ASCII，还要支持Base64编码、二进制编码

## 面临的问题：

- 浏览器需要知道服务器返回的资源类型 -- 需要响应头
- 浏览器需要知道服务器返回的资源使用的压缩手段 -- 需要响应头
- 浏览器要能告诉服务器自己支持的语言版本 -- 因为万维网是全球性的

## 特点：

1. 增加了请求头和响应头 -- 可以携带更多信息
    - 请求头：`accept: text/html`、`accept-language: zh-CN`、`accpett-encoding: gzip, deflate`
    - 响应头：`content-type: text/html`、`content-encoding: gzip`、`status: 200 OK`、`cache-control: max-age=3600`

# HTTP/1.1 版本

## 特点：

1. 默认使用**持久连接** -- 复用TCP连接，减少建立连接的开销
2. 默认允许建立6个TCP持久并发连接 -- 提高资源加载速度
3. 提供了虚拟机支持 -- 通过`Host`请求头区分**不同域名**
4. 客户端引入了Cookies安全机制

## 问题：

1. 队头阻塞问题 -- 由于HTTP/1.1是**串行传输**，前一个请求未完成，后一个请求只能等待
2. TCP流量拥塞控制导致的慢启动问题（TCP的队头阻塞）-- 刚启动时，TCP连接的拥塞窗口较小，发包速度慢
3. 同时允许建立6个TCP持久连接 -- 各个连接之间相互竞争带宽

# HTTP/2.0 版本

## 解决1.1版本的问题：

- 多路复用：
    1. 引入了二进制分帧层 -- 将**HTTP消息分割成更小的帧**进行传输
    2. 将请求都处理成二进制帧，携带上编号和优先级 -- 允许**多个请求和响应在同一个连接上并发交错发送**
    3. 服务器根据编号**将请求片段重新组合，将响应体传入二进制分帧层**
    4. 客户端**收到响应片段后，根据编号将响应片段重新组合，返回给浏览器**

- 服务端推送：
    1. 服务器可以**主动向客户端推送资源，而不需要客户端显式请求**

- 头部压缩：
    1. 使用压缩算法对**请求头和响应头进行压缩**，减少传输数据量

# HTTPS 版本 -- （HTTP + TLS）

- HTTP的**安全版本** -- 在HTTP的基础上，结合SSL/TLS协议，实现数据加密传输和身份验证

## 特点：

1. TLS提供了两种加密方式：
    - 对称加密：**加密和解密都使用相同的密钥**，速度快，适合大数据量传输
    - 非对称加密
        1. 服务端创建一个公钥和私钥 -- 私钥保存在服务器，公钥可以公开
        2. 客户端使用公钥加密密钥，发送给服务器
        3. 服务器使用私钥解密客户端的数据，得到密钥
        4. 后续直接使用密钥进行对称加密传输数据

# HTTP/3.0 版本 -- （基于QUIC协议）

- 2.0版本剩余的问题都是TCP带来的，而TCP过于底层，改动成本过大

- 打造了新的传输层协议QUIC
    1. 基于UDP协议
    2. 多路复用
    3. 服务端推送
    4. 头部压缩
    5. 集成TLS加密

- 3.0推广缓慢，因为设备更新慢